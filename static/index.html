<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PERSONALIZE FSH</title>
    <!-- 引入 jQuery 库 -->
    <script src="/static/jquery-3.7.1.min.js"></script>
    <script src="/static/jquery.serializejson.js"></script>
    <script src="/static/script.js"></script>
    <script src="/static/jquery.validate.min.js"></script>
    <script src="/static/messages_zh.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        .error{
            color: red;
            font-weight: bold;
        }
        .custom-tooltip {
            --bs-tooltip-bg: var(--bd-violet-bg);
            --bs-tooltip-color: var(--bs-white);
        }
    </style>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <div class="container m-3">
        <h1>正向预测</h1>
            <div class="container">
                <div class="row">
                    <div class="col-md">
                        <form id="pos_prediction_form" class="m-3">

                            <label for="female_agep">女方年龄<span style="color: red;">*</span>:</label>
                            <input type="number" id="female_agep" name="female_age:number" min="21" max="46" required /><br>

                            <label for="male_agep">男方年龄:</label>
                            <input type="number" id="male_agep" name="male_age:number" min="23" max="70" /><br>
                
                            <label for="AFCp">AFC<span style="color: red;">*</span>:</label>
                            <input type="number" id="AFCp" name="AFC:number" min="0" max="76" required /><br>

                            <label for="AMHp">AMH(ng/ml)<span style="color: red;">*</span>:</label>
                            <input type="number" id="AMHp" name="AMH:number" min="0.05" max="23.11" required /><br>
                
                            <label for="bFSHp">bFSH(IU/L)<span style="color: red;">*</span>:</label>
                            <input type="number" id="bFSHp" name="bFSH:number" min="1.77" max="24.56" required /><br>

                            <label for="bLHp">bLH(IU/L):</label>
                            <input type="number" id="bLHp" name="bLH:number" min="0.0" max="20.0" /><br>

                            <label for="FSH_LHp">FSH/LH:</label>
                            <input type="number" id="FSH_LHp" name="FSH_LH:number" min="0.0" max="23.0" disabled /><br>

                            <label for="heightp">身高(cm):</label>
                            <input type="number" id="heightp" name="height:number" min="142" max="200" /><br>
                
                            <label for="weightp">体重(kg):</label>
                            <input type="number" id="weightp" name="weight:number" min="36" max="100" /><br>
                
                            <label for="BMIp">BMI:</label>
                            <input type="number" id="BMIp" name="BMI:number" disabled /><br>

                            <label for="past_pregnanciesp">既往活产次数:</label>
                            <input type="number" id="past_pregnanciesp" name="past_pregnancies:number" min="0" max="3" step="1" /><br>

                            <label for="is_PCOS">是否PCOS</label>
                            <select id="is_PCOS" name="is_PCOS:number">
                                <option value="0.0" selected>否</option>
                                <option value="1.0">是</option>
                            </select><br>

                            <label for="PGT_evidence">PGT指征</label>
                            <select id="PGT_evidence" name="PGT_evidence:number">
                                <option value="1.0">RSA</option>
                                <option value="2.0">RIF</option>
                                <option value="3.0">不良孕产史</option>
                                <option value="4.0">单纯高龄</option>
                                <option value="5.0">单基因病</option>
                                <option value="6.0" selected>其它</option>
                            </select><br>
                
                            <label for="stimulation_protocolp">促排方案:</label>
                            <select id="stimulation_protocolp" name="stimulation_protocol:number">
                                <option value="1.0">长方案</option>
                                <option value="2.0">拮抗剂</option>
                            </select><br>
                
                            <label for="E2p">E2(ng/ml):</label>
                            <input type="number" id="E2p" name="E2:number" min="10" max="130" /><br>
                            
                            <button type="button" class="btn btn-primary" id="submit_pos_form">提交</button>
                        </form>        
                    </div>
                    <div class="col-md">
                        <table class="table">
                            <thead>
                              <tr>
                                <th scope="col">起始Gn剂量</th>
                                <th scope="col">卵子总数</th>
                                <th scope="col">可移植胚胎数</th>
                                <th scope="col">是否OHSS</th>
                              </tr>
                            </thead>
                            <tbody id="pos_result_form">
                                <tr>
                                    <th>100</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>125</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>150</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>175</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>200</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>225</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>250</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>275</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>300</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>325</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>350</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>375</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>400</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>425</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tbody>
                          </table>
                    </div>
                </div>
            </div>
        <h1>预测起始剂量</h1>
        <form id="prediction-form" class="m-3">
            <label for="female_age">女方年龄<span style="color: red;">*</span>:</label>
            <input type="number" id="female_age" name="female_age:number" min="0" max="100" required /><br>

            <label for="AFC">AFC<span style="color: red;">*</span>:</label>
            <input type="number" id="AFC" name="AFC:number" min="0" required /><br>

            <label for="bFSH">bFSH(IU/L)<span style="color: red;">*</span>:</label>
            <input type="number" id="bFSH" name="bFSH:number" min="0" required /><br>

            <label for="AMH">AMH(ng/ml)<span style="color: red;">*</span>:</label>
            <input type="number" id="AMH" name="AMH:number" min="0" required /><br>

            <label for="stimulation_protocol">促排方案:</label>
            <select id="stimulation_protocol" name="stimulation_protocol:number">
                <option value="1.0">长方案</option>
                <option value="2.0">拮抗剂</option>
            </select><br>

            <label for="height">身高(cm):</label>
            <input type="number" id="height" name="height:number" min="0" /><br>

            <label for="weight">体重(kg):</label>
            <input type="number" id="weight" name="weight:number" min="0" /><br>

            <label for="BMI">BMI:</label>
            <input type="number" id="BMI" name="BMI:number" min="0" disabled /><br>

            <label for="bLH">bLH(IU/L):</label>
            <input type="number" id="bLH" name="bLH:number" min="0" /><br>

            <label for="E2">E2(ng/ml):</label>
            <input type="number" id="E2" name="E2:number" min="0" /><br>

            <label for="FSH_LH">FSH/LH:</label>
            <input type="number" id="FSH_LH" name="FSH_LH:number" min="0" disabled /><br>

            <label for="male_age">男方年龄:</label>
            <input type="number" id="male_age" name="male_age:number" min="0" max="100" /><br>

            <label for="past_pregnancies">既往活产次数:</label>
            <input type="number" id="past_pregnancies" name="past_pregnancies:number" min="0" step="1" /><br>

            <label for="total_oocytes">获得卵子数<span style="color: red;">*</span>:</label>
            <input type="number" id="total_oocytes" name="total_oocytes:number" min="0" max="30" required /><br>

            <button type="button" class="btn btn-primary" id="submit-button">提交</button>
            <div>初始剂量：<span id="prediction-result"></span></div>

        </form>

        <h1>预测可移植胚胎数概率与起始剂量</h1>
        <form id="prop-prediction-form" class="m-3">
            <label for="female-age4">女方年龄<span style="color: red;">*</span>:</label>
            <input type="number" id="female-age4" name="female_age:number" min="0" max="100" required /><br>

            <label for="AFC4">AFC<span style="color: red;">*</span>:</label>
            <input type="number" id="AFC4" name="AFC:number" min="0" required /><br>

            <label for="bFSH4">bFSH(IU/L)<span style="color: red;">*</span>:</label>
            <input type="number" id="bFSH4" name="bFSH:number" min="0" required /><br>

            <label for="AMH4">AMH(ng/ml)<span style="color: red;">*</span>:</label>
            <input type="number" id="AMH4" name="AMH:number" min="0" required /><br>

            <label for="stimulation-protocol4">促排方案:</label>
            <select id="stimulation-protocol4" name="stimulation_protocol:number">
                <option value="1.0">长方案</option>
                <option value="2.0">拮抗剂</option>
            </select><br>

            <label for="height4">身高(cm):</label>
            <input type="number" id="height4" name="height:number" min="0" /><br>

            <label for="weight4">体重(kg):</label>
            <input type="number" id="weight4" name="weight:number" min="0" /><br>

            <label for="BMI4">BMI:</label>
            <input type="number" id="BMI4" name="BMI:number" min="0" disabled /><br>

            <label for="bLH4">bLH(IU/L):</label>
            <input type="number" id="bLH4" name="bLH:number" min="0" /><br>

            <label for="E24">E2(ng/ml):</label>
            <input type="number" id="E24" name="E2:number" min="0" /><br>

            <label for="FSH_LH4">FSH/LH:</label>
            <input type="number" id="FSH_LH4" name="FSH_LH:number" min="0" disabled /><br>

            <label for="male-age4">男方年龄:</label>
            <input type="number" id="male-age4" name="male_age:number" min="0" max="100" /><br>

            <label for="past-pregnancies4">既往活产次数:</label>
            <input type="number" id="past-pregnancies4" name="past_pregnancies:number" min="0" step="1" /><br>

            <!-- <label for="initial_gn">起始Gn剂量<span style="color: red;">*</span>:</label>
        <input type="number" id="initial_gn" name="initial_gn:number" min="75" max="425" step="1" required/><br> -->

            <label for="total_oocytes_lt25_2">卵子总数是否≤25:</label>
            <select id="total_oocytes_lt25_2" name="total_oocytes_lt25:number" disabled>
                <option value="1.0" selected>是</option>
                <option value="0.0">否</option>
            </select><br>

            <label for="is_OHSS2">是否中重度OHSS:</label>
            <select id="is_OHSS2" name="is_OHSS:number" disabled>
                <option value="1.0">是</option>
                <option value="0.0" selected>否</option>
            </select><br>

            <button type="button" class="btn btn-primary" id="prop-submit-button">预测概率</button>
            <button type="button" class="btn btn-secondary m-1"
                data-bs-toggle="tooltip" data-bs-placement="top"
                data-bs-title="根据基础生理指标预测可移植胚胎数概率，展示最高概率类别">?</button>
    

            <div>预测结果(三类,=0,=1,≥2)：<span id="prop_result"><span id="prop_result_str"></span>概率<span
                id="prop_result_proba"></span>%</span></div><br>

            <label for="oocytes_transfer2">可移植胚胎数<span style="color: red;">*</span>:</label>
            <select id="oocytes_transfer2" name="oocytes_transfer:number">
                <option value="1.0" selected>1</option>
                <option value="2.0">2</option>
                <option value="3.0">3</option>
                <option value="4.0">4</option>
                <option value="5.0">5</option>
                <option value="6.0">6</option>
            </select><br>

            <button type="button" class="btn btn-primary" id="s1s2-submit-button">预测初始剂量</button>
            <button type="button" class="btn btn-secondary m-1"
                data-bs-toggle="tooltip" data-bs-placement="top"
                data-bs-title="第一步：模型1根据生理指标和输入的限制（副作用和可以移植胚胎数等）预测卵子总数。第二步：模型2根据模型1的输出和生理指标预测起始Gn剂量">?</button>
            <div>卵子总数：<span id="s1s2_eggs_result"></span></div>
            <div>初始剂量：<span id="s1s2_fsh_result"></span></div>
        </form>

        <h1>POvaStim方案预测卵子数与起始剂量</h1>
        <form id="dual-prediction-form" class="m-3">
            <label for="female-age2">女方年龄<span style="color: red;">*</span>:</label>
            <input type="number" id="female-age2" name="female_age:number" min="0" max="100" required /><br>

            <label for="AFC2">AFC<span style="color: red;">*</span>:</label>
            <input type="number" id="AFC2" name="AFC:number" min="0" required /><br>

            <label for="bFSH2">bFSH(IU/L)<span style="color: red;">*</span>:</label>
            <input type="number" id="bFSH2" name="bFSH:number" min="0" required /><br>

            <label for="AMH2">AMH(ng/ml)<span style="color: red;">*</span>:</label>
            <input type="number" id="AMH2" name="AMH:number" min="0" required /><br>

            <label for="stimulation-protocol2">促排方案:</label>
            <select id="stimulation-protocol2" name="stimulation_protocol:number">
                <option value="1.0">长方案</option>
                <option value="2.0">拮抗剂</option>
            </select><br>

            <label for="height2">身高(cm):</label>
            <input type="number" id="height2" name="height:number" min="0" /><br>

            <label for="weight2">体重(kg):</label>
            <input type="number" id="weight2" name="weight:number" min="0" /><br>

            <label for="BMI2">BMI:</label>
            <input type="number" id="BMI2" name="BMI:number" min="0" disabled /><br>

            <label for="bLH2">bLH(IU/L):</label>
            <input type="number" id="bLH2" name="bLH:number" min="0" /><br>

            <label for="E22">E2(ng/ml):</label>
            <input type="number" id="E22" name="E2:number" min="0" /><br>

            <label for="FSH_LH2">FSH/LH:</label>
            <input type="number" id="FSH_LH2" name="FSH_LH:number" disabled /><br>

            <label for="male-age2">男方年龄:</label>
            <input type="number" id="male-age2" name="male_age:number" min="0" max="100" /><br>

            <label for="past-pregnancies2">既往活产次数:</label>
            <input type="number" id="past-pregnancies2" name="past_pregnancies:number" min="0" step="1" /><br>

            <button type="button" class="btn btn-primary" id="dual-submit-button">提交</button>
            <div>
                卵子数：<span id="dual-egg"></span><br>
                初始剂量：<span id="dual-fsh"></span>
            </div>
        </form>
        
    </div>
</body>

</html>